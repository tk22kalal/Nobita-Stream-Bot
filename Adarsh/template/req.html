<!--(c) NobiDeveloper-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta property="og:image" content="https://graph.org/file/5e6d18610741226005e6e.jpg" itemprop="thumbnailUrl">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="monetag" content="f3ecc71ccb639ccf66d9d0dee93d3e7a">
    <title>{{ file_name }}</title>
    <link rel="stylesheet" type='text/css' href="https://drive----google.com/uc?export=view&id=1pVLG4gZy7jdow3sO-wFS06aP_A9QX0O6">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Delius">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.6.9/plyr.css" />

    <style>
        marquee {
            font-size: 30px;
            font-weight: 800;
            color: Black;
            font-family: serif;
        }
    </style>
    <meta name='dmca-site-verification' content='THBkdGsyeW85ZTBMT3VZNHpteGkvWEtoV3h5NENqcDdPa2hsUzZiU0ZZST01' />
</head>

<body>

    <header>
        <marquee bgcolor="#fff">
            <div class="toogle"></div>
            <div id="file-name">
                {{ file_name }}
            </div>
        </marquee>
    </header>

    <div class="container">
        <{{ tag }} src="{{ file_url }}" class="player"></{{ tag }}>
    </div>


<script src="https://cdn.plyr.io/3.6.9/plyr.js"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
    const controls = [
        'play-large', 'rewind', 'play', 'fast-forward', 'progress',
        'current-time', 'duration', 'mute', 'volume', 'captions',
        'settings', 'pip', 'airplay', 'fullscreen'
    ];

    document.addEventListener('DOMContentLoaded', () => {
        const playerElement = document.querySelector('.player');
        if (!playerElement) return;

        const source = playerElement.getAttribute('src');
        let player;

        // Only proceed if the tag is video
        if (playerElement.tagName.toLowerCase() === 'video') {
            if (source.endsWith('.m3u8')) {
                if (Hls.isSupported()) {
                    // Hls.js for browsers that don't support HLS natively
                    const hls = new Hls({
                        maxBufferLength: 30,
                        maxMaxBufferLength: 60,
                        startLevel: -1,
                    });
                    hls.loadSource(source);
                    hls.attachMedia(playerElement);

                    hls.on(Hls.Events.ERROR, function (event, data) {
                        console.error('HLS error:', data);
                    });

                    hls.on(Hls.Events.MANIFEST_PARSED, function () {
                        player = new Plyr(playerElement, {
                            controls,
                            preload: 'metadata',
                            playsinline: true,
                            seekTime: 10
                        });
                    });
                } else if (playerElement.canPlayType('application/vnd.apple.mpegurl')) {
                    // Native HLS support (Safari, iOS)
                    playerElement.src = source;
                    player = new Plyr(playerElement, {
                        controls,
                        preload: 'metadata',
                        playsinline: true,
                        seekTime: 10
                    });
                } else {
                    console.error('HLS is not supported in this browser.');
                }
            } else {
                // For MP4 or other direct video
                player = new Plyr(playerElement, {
                    controls,
                    preload: 'metadata',
                    playsinline: true,
                    seekTime: 10
                });
            }
        } else {
            // For audio or other tags, fallback to Plyr only
            player = new Plyr(playerElement, {
                controls,
                preload: 'metadata',
                playsinline: true,
                seekTime: 10
            });
        }
    });
</script>
    
</body>
</html>   
